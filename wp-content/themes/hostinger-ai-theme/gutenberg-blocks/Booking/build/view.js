document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".booking-form").forEach((e=>{const t=e.querySelector('button[type="submit"]'),n=e.querySelector('input[type="checkbox"][name="privacy_policy"]'),i=e.nextElementSibling;function s(){n.required&&!n.checked?(t.disabled=!0,t.classList.add("disabled")):(t.disabled=!1,t.classList.remove("disabled"))}n&&t&&s(),n&&n.addEventListener("change",s),e.addEventListener("submit",(function(s){if(s.preventDefault(),n&&n.required&&!n.checked)return i.textContent="Please agree to the privacy policy before submitting.",i.className="form-message error",void(i.style.visibility="visible");t.disabled=!0,t.textContent="Sending...";const o={},r=e.elements;for(let e=0;e<r.length;e++){const t=r[e];t.name&&"website_url"!==t.name&&(o[t.name]=t.value,"checkbox"===t.type&&(o[t.name]=t.checked))}const a=e.querySelector('input[name="website_url"]');if(a&&a.value)return t.disabled=!1,void(t.textContent="Submit");fetch("/wp-json/hostinger/v1/booking-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((n=>{i.textContent="Thank you! Your booking has been submitted successfully.",i.className="form-message success",i.style.visibility="visible",e.reset(),t.disabled=!1,t.textContent="Submit"})).catch((e=>{i.textContent="There was an error submitting your booking. Please try again.",i.className="form-message error",i.style.visibility="visible",t.disabled=!1,t.textContent="Submit",console.error("Error:",e)}))}))}))}));